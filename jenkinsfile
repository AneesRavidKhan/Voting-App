pipeline {

agent any

stages {

    stage ('Unit-Test') {
        steps {
            sh 'mvn test'
        }
    }

    stage ('Publish-Test-Reports') {
        steps {
            junit 'target/surefire-reports/*.xml'
        }
    }

    stage ('Build') {
        steps {
            sh 'mvn package -DskipTests'
        }
    }

    stage ('BuiArchive-Artifactsld') {
        steps {
            archiveArtifacts artifacts: 'target/hello-world.war'
        }
    }

    stage ('Deploy') {
        steps {
            scp -i /home/Khan/key.pem target/hello-world.war ubuntu@3.108.218.192:/home/ubuntu/
        }
    }

}

}